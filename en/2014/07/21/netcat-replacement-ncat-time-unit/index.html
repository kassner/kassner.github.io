<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"><title>netcat replacement Ncat time unit | Rafael Kassner</title><meta name="robots" content="index,follow"/><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://www.kassner.com.br/atom.xml"/><link rel="canonical" href="https://www.kassner.com.br/en/2014/07/21/netcat-replacement-ncat-time-unit/"/><link rel="stylesheet" href="https://www.kassner.com.br/assets/css/main.css"/></head><body class="post"><div class="background"></div><div id="wrapper"> <header> <nav id="site-navigation" class="main-navigation" role="navigation"> <label for="drop" class="toggle">Menu</label> <input type="checkbox" id="drop"/><ul id="primary-menu" class="menu"><li class="menu-item"><a href="https://www.kassner.com.br">Rafael Kassner</a></li><li class="menu-item"><a href="https://www.kassner.com.br/projects/">Projects</a></li><li class="menu-item"><a href="https://www.kassner.com.br/about/">About</a></li></ul> </nav> </header><div class="pull-down"></div><div class="container"><div id="primary" class="content-area"> <main id="main" class="site-main" role="main"> <article lang="en" class="post type-post status-publish format-standard hentry"><h1 class="article-header"><a href="https://www.kassner.com.br/en/2014/07/21/netcat-replacement-ncat-time-unit/">netcat replacement Ncat time unit</a></h1><div class="entry-meta"><div class="byline"> <span class="posted-on"><time class="entry-date published" datetime="2014-07-21T00:00:00+00:00">2014-07-21</time></span> <span class="language">English</span></div></div><div class="entry-content"><p>Hi,</p><p>It’s common to use <code class="language-plaintext highlighter-rouge">netcat</code> utility to work with SSH ProxyCommand, which allows to use a bridge server, very useful when you need to connect directly to a host behind a firewall. Example:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># File: ~/.ssh/config

Host workbox
  HostName 192.168.1.92 # The ip address that the bridge server can see
  User anotherusername
  IdentityFile ~/.ssh/id_rsa
  ProxyCommand ssh myusername@firewall.company.com nc -w 120 %h %p
</code></pre></div></div><p>I was using <code class="language-plaintext highlighter-rouge">netcat</code> until a couple of days, and works very smooth. Then I’ve setup a new server on another private network, behind a CentOS 7 firewall, and when I’ve tried the configuration above, I got this:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ncat: Since April 2010, the default unit for -w is seconds, so your time of "120" is 2.0 minutes. Use "120ms" for 120 milliseconds. QUITTING.
</code></pre></div></div><p>I didn’t know, but I’m using <a href="http://nmap.org/ncat/">Ncat</a> instead of the old <a href="http://netcat.sourceforge.net/">Netcat</a>. I got not time to learn the differences, but I already found one. Every parameter that receives a time needs the unit. From <code class="language-plaintext highlighter-rouge">ncat --help</code>:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>nc <span class="nt">--help</span>
Ncat 6.40 <span class="o">(</span> http://nmap.org/ncat <span class="o">)</span>
Usage: ncat <span class="o">[</span>options] <span class="o">[</span><span class="nb">hostname</span><span class="o">]</span> <span class="o">[</span>port]

Options taking a <span class="nb">time </span>assume seconds. Append <span class="s1">'ms'</span> <span class="k">for </span>milliseconds,
<span class="s1">'s'</span> <span class="k">for </span>seconds, <span class="s1">'m'</span> <span class="k">for </span>minutes, or <span class="s1">'h'</span> <span class="k">for </span>hours <span class="o">(</span>e.g. 500ms<span class="o">)</span><span class="nb">.</span>
</code></pre></div></div><p>Then, in my SSH configuration I had to change the <code class="language-plaintext highlighter-rouge">-w</code> param to add the time unit (<code class="language-plaintext highlighter-rouge">ms</code>, <code class="language-plaintext highlighter-rouge">s</code>, <code class="language-plaintext highlighter-rouge">m</code>, <code class="language-plaintext highlighter-rouge">h</code>, etc):</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ProxyCommand ssh myusername@firewall.company.com nc -w 120m %h %p
</code></pre></div></div><p>Bye.</p></div><div class="entry-footer"><p class="cat-links">Posted in <a href="/tags/linux/" rel="tag">linux</a>, <a href="/tags/network/" rel="tag">network</a></p></div> </article> </main></div></div></div><footer><div class="footer-content"></div><div class="footer"><div><div> <span class="copy">Copyright © 2010-2021 Rafael Kassner</span></div></div></div> </footer></body></html>