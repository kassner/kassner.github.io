<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"><title>SOCKS proxy with SSH | Rafael Kassner</title><meta name="robots" content="index,follow"/><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://www.kassner.com.br/atom.xml"/><link rel="canonical" href="https://www.kassner.com.br/en/2018/06/25/socks-proxy-with-ssh/"/><link rel="stylesheet" href="https://www.kassner.com.br/assets/css/main.css"/></head><body class="post"><div class="background"></div><div id="wrapper"> <header> <nav id="site-navigation" class="main-navigation" role="navigation"> <label for="drop" class="toggle">Menu</label> <input type="checkbox" id="drop"/><ul id="primary-menu" class="menu"><li class="menu-item"><a href="https://www.kassner.com.br">Rafael Kassner</a></li><li class="menu-item"><a href="https://www.kassner.com.br/projects/">Projects</a></li><li class="menu-item"><a href="https://www.kassner.com.br/about/">About</a></li></ul> </nav> </header><div class="pull-down"></div><div class="container"><div id="primary" class="content-area"> <main id="main" class="site-main" role="main"> <article lang="en" class="post type-post status-publish format-standard hentry"><h1 class="article-header"><a href="https://www.kassner.com.br/en/2018/06/25/socks-proxy-with-ssh/">SOCKS proxy with SSH</a></h1><div class="entry-meta"><div class="byline"> <span class="posted-on"><time class="entry-date published" datetime="2018-06-25T00:00:00+00:00">2018-06-25</time></span> <span class="language">English</span></div></div><div class="entry-content"><p>That’s not a new thing, but I happened to use it during the weekend to be able to access some services back in Brazil that were IP-limited and HideMyAss couldn’t help, so I asked a friend for a small proxy help.</p><p>What I did on my side:</p><ol><li>Opened a port on my modem to forward the connection to the port 51000 on my computer;</li><li>Started a container: <code class="language-plaintext highlighter-rouge">docker run -p 51000:51000 -p 51001:51001 --rm -it ubuntu:xenial bash</code>;</li><li>Installed <code class="language-plaintext highlighter-rouge">supervisord</code>, <code class="language-plaintext highlighter-rouge">openssh-server</code> and added <code class="language-plaintext highlighter-rouge">GatewayPorts yes</code> to <code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>;</li></ol><p>My friend had to run those commands in parallel:</p><ol><li><code class="language-plaintext highlighter-rouge">ssh -D 51001 localhost</code>;</li><li><code class="language-plaintext highlighter-rouge">ssh -R :51001:localhost:51001 use@myIP -p 51000</code>;</li></ol><p>And voilá, I had a SOCKS proxy over <code class="language-plaintext highlighter-rouge">localhost:51000</code> that was going out to the internet using a Brazilian IP address.</p></div><div class="entry-footer"><p class="cat-links">Posted in <a href="/tags/linux/" rel="tag">linux</a>, <a href="/tags/network/" rel="tag">network</a></p></div> </article> </main></div></div></div><footer><div class="footer-content"></div><div class="footer"><div><div> <span class="copy">Copyright © 2010-2021 Rafael Kassner</span></div></div></div> </footer></body></html>