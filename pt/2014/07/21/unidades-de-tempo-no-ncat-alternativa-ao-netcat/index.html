<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"><title>Unidades de tempo no Ncat, alternativa ao netcat | Rafael Kassner</title><meta name="robots" content="index,follow"/><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://www.kassner.com.br/atom.xml"/><link rel="canonical" href="https://www.kassner.com.br/pt/2014/07/21/unidades-de-tempo-no-ncat-alternativa-ao-netcat/"/><link rel="stylesheet" href="https://www.kassner.com.br/assets/css/main.css"/></head><body class="post"><div class="background"></div><div id="wrapper"> <header> <nav id="site-navigation" class="main-navigation" role="navigation"> <label for="drop" class="toggle">Menu</label> <input type="checkbox" id="drop"/><ul id="primary-menu" class="menu"><li class="menu-item"><a href="https://www.kassner.com.br">Rafael Kassner</a></li><li class="menu-item"><a href="https://www.kassner.com.br/projects/">Projects</a></li><li class="menu-item"><a href="https://www.kassner.com.br/about/">About</a></li></ul> </nav> </header><div class="pull-down"></div><div class="container"><div id="primary" class="content-area"> <main id="main" class="site-main" role="main"> <article lang="en" class="post type-post status-publish format-standard hentry"><h1 class="article-header"><a href="https://www.kassner.com.br/pt/2014/07/21/unidades-de-tempo-no-ncat-alternativa-ao-netcat/">Unidades de tempo no Ncat, alternativa ao netcat</a></h1><div class="entry-meta"><div class="byline"> <span class="posted-on"><time class="entry-date published" datetime="2014-07-21T00:00:00+00:00">2014-07-21</time></span> <span class="language">Português</span></div></div><div class="entry-content"><p>Olá,</p><p>É comum o uso da ferramenta <code class="language-plaintext highlighter-rouge">netcat</code> com o ProxyCommand do SSH, que permite usar um servidor como bridge, útil quando precisamos conectar em uma máquina atrás de um firewall. Exemplo:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Arquivo: ~/.ssh/config

Host computadordaempresa
  HostName 192.168.1.92 # O endereço IP que o firewall consegue enxergar
  User outrousuario
  IdentityFile ~/.ssh/id_rsa
  ProxyCommand ssh meuusuario@firewall.empresa.com nc -w 120 %h %p
</code></pre></div></div><p>Eu usava o <code class="language-plaintext highlighter-rouge">netcat</code> e funcionava perfeitamente. Então, precisei conectar em uma máquina em outra rede, e o firewall desta utilizava CentOS 7, e ao tentar utilizar a configuração acima eu recebi o seguinte erro:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ncat: Since April 2010, the default unit for -w is seconds, so your time of "120" is 2.0 minutes. Use "120ms" for 120 milliseconds. QUITTING.
</code></pre></div></div><p>Eu não sabia, mas eu estava usando o <a href="http://nmap.org/ncat/">Ncat</a> ao invés do velho <a href="http://netcat.sourceforge.net/">Netcat</a>. Ainda não tive tempo de estudar as diferenças, porém uma é evidente. Todo parâmetro que um valor de tempo precisa ter a unidade. Em <code class="language-plaintext highlighter-rouge">ncat --help</code>:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>nc <span class="nt">--help</span>
Ncat 6.40 <span class="o">(</span> http://nmap.org/ncat <span class="o">)</span>
Usage: ncat <span class="o">[</span>options] <span class="o">[</span><span class="nb">hostname</span><span class="o">]</span> <span class="o">[</span>port]

Options taking a <span class="nb">time </span>assume seconds. Append <span class="s1">'ms'</span> <span class="k">for </span>milliseconds,
<span class="s1">'s'</span> <span class="k">for </span>seconds, <span class="s1">'m'</span> <span class="k">for </span>minutes, or <span class="s1">'h'</span> <span class="k">for </span>hours <span class="o">(</span>e.g. 500ms<span class="o">)</span><span class="nb">.</span>
</code></pre></div></div><p>Desta forma, minha configuração de SSH precisa ter a unidade de tempo (<code class="language-plaintext highlighter-rouge">ms</code>, <code class="language-plaintext highlighter-rouge">s</code>, <code class="language-plaintext highlighter-rouge">m</code>, <code class="language-plaintext highlighter-rouge">h</code>, etc) adicionada ao parâmetro <code class="language-plaintext highlighter-rouge">-w</code>:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ProxyCommand ssh myusername@firewall.company.com nc -w 120m %h %p
</code></pre></div></div><p>Até mais.</p></div><div class="entry-footer"><p class="cat-links">Posted in <a href="/tags/linux/" rel="tag">linux</a>, <a href="/tags/network/" rel="tag">network</a></p></div> </article> </main></div></div></div><footer><div class="footer-content"></div><div class="footer"><div><div> <span class="copy">Copyright © 2010-2021 Rafael Kassner</span></div></div></div> </footer></body></html>